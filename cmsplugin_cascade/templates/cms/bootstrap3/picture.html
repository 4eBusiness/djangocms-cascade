{% load thumbnail filer_tags filer_image_tags %}{% spaceless %}
{% comment %}
	You may change the image size for special cases in your project by overriding
	this template. There are a few size manipulation filters for this in
	`filer_image_tags`:

	{% if placeholder == 'my_special_sidebar' %}
		{% thumbnail instance.image opts.size|extra_padding_y:10 crop=opts.crop upscale=opts.upscale as thumbnail %}
	{% else %}
		{% thumbnail instance.image opts.size crop=opts.crop upscale=opts.upscale as thumbnail %}
	{% endif %}
	{% if link %}<a href="{{ link }}"{% if instance.target_blank %} target="_blank"{% endif %}>{% endif %}<img{% if instance.alignment %} class="{{ instance.alignment }}"{% endif %} alt="{% if instance.alt %}{{ instance.alt }}{% endif %}" src="{{ thumbnail.url }}"{% if instance.caption %} title="{{ instance.caption }}"{% endif %} />{% if link %}</a>{% endif %}
{% endcomment %}

{% if instance.link %}<a href="{{ instance.link }}"{% if instance.target_blank %} target="_blank"{% endif %}>{% endif %}
<picture>
	{% for breakpoint, appearance in appearances.items %}
		{% thumbnail instance.image appearance.size as thumb %}
		{% if breakpoint != "default" %}
	<source srcset="{{ thumb.url }}" media="{{ appearance.media }}">
		{% endif %}
	{% endfor %}
	{% thumbnail instance.image appearance.default.size as thumb %}
	<img srcset="{{ thumb.url }}" {{ instance.tag_attributes }} class="{{ instance.css_classes }}">
</picture>
{% if link %}</a>{% endif %}

{% comment %}
		<img class="filer_image {% if instance.alignment %}{{ instance.alignment }}{% endif %}" alt="{% if instance.alt %}{{ instance.alt }}{% endif %}" src="{{ thumbnail.url }}"{% if instance.width %} width="{{ instance.width }}"{% endif %}{% if instance.height %} height="{{ instance.height }}"{% endif %}{% if instance.caption %} title="{{ instance.caption }}"{% endif %} />
{% if instance.caption or instance.description %}
	<span class="filer_image_info">
		{% if instance.caption %}<span class="title">{{ instance.caption }}</span>{% endif %}
		{% if instance.description %}<span class="desc">{{ instance.description }}</span>{% endif %}
	</span>
{% endif %}


	<source srcset="{{ thumbnail_sm.url }}" media="(max-width: 992px)">
	<source srcset="{{ thumbnail_md.url }}" media="(max-width: 1200px)">
	<source srcset="{{ thumbnail_lg.url }}" media="(min-width: 1200px)">
{% endcomment %}

{% endspaceless %}
